+++
title = "HTML Report"
weight = 15
pre = '<i class="fas fa-chart-bar"></i> '
plotly = true
+++

## Concept

---
Alignments generated by `Captus` can be directly input to phylogenetic tree reconstruction tools such as [`IQ-TREE`](http://www.iqtree.org).
However, before doing so, it is common practice to **filter out gappy columns** and **remove sequences that are too short**.
This little hassle allows to obtain **more accurate phylogenetic inference with less computation time**.
In addition, since `Captus` generates several versions of alignments with different formats, trimming conditions, paralog filtering conditions, and so on, you may be wondering which version to use for phylogenetic inference.

Open the report, `captus-assembly_align.report.html` in your browser (Microsoft Edge, Google Chrome, Mozilla Firefox, Safari, etc., internet connection required) to see which alignments should be filtered out, and to compare general statistics for each version of alignments!
{{% notice style="tip" title="Tips" %}}

- All original data for the report is stored in `captus-assembly_align.stats.tsv`.
- Since all plots in the report are created using [`Plotly`](https://plotly.com/python), you can use some useful functions such as rearrange the column order by dragging and download plot as a PNG.
For more information, please visit the following site:

  - <https://plotly.com/chart-studio-help/zoom-pan-hover-controls>
  - <https://plotly.com/chart-studio-help/getting-to-know-the-plotly-modebar>
{{% /notice %}}

## Contents

---

### 1. Stats Comparison at Each Processing Step

This plot shows the general statistics of the different processing steps of alignment.  
Each processing step of the alignments differs in the combination of whether it is trimmed or untrimmed, which paralog filter was applied, and whether it was aligned with the reference sequences or not.

##### Features:

- `Marker Type` dropdown (if your data has only one marker type, this dropdown will not show up)
- dropdown on the X-axis
- By clicking on the legend, you can toggle between showing and hiding each format

{{< plotly json="/plotly/alignment_report_ridgeline.json" height="700px" >}}
{{% expand "Description of each processing step" %}}
depends on `--filter_method`, You will have up to 12 processing steps as follows:
|Processing step (Path to alignments)|Trimmed|Paralog filter|With reference|
|-|-|-|-|
|**`02_untrimmed/01_unfiltered`**|No|None|**Yes**|
|`02_untrimmed/02_fast`|No|**Fast**|**Yes**|
|`02_untrimmed/03_careful`|No|**Careful**|**Yes**|
|`02_untrimmed/01_unfiltered_no_refs`|No|None|No|
|`02_untrimmed/02_fast_no_refs`|No|**Fast**|No|
|`02_untrimmed/03_careful_no_refs`|No|**Careful**|No|
|`03_trimmed/01_unfiltered`|**Yes**|None|**Yes**|
|`03_trimmed/02_fast`|**Yes**|**Fast**|**Yes**|
|`03_trimmed/03_careful`|**Yes**|**Careful**|**Yes**|
|`03_trimmed/01_unfiltered_no_refs`|**Yes**|None|No|
|`03_trimmed/02_fast_no_refs`|**Yes**|**Fast**|No|
|`03_trimmed/03_careful_no_refs`|**Yes**|**Careful**|No|
{{% /expand %}}

---

### 2. Bivariate Relationships and Distributions

description

##### Features:

- `Processing Step` dropdown
- change variables to plot on each axis.
- By clicking on the legend, you can toggle between showing and hiding each format
- If your results contain multiple marker types, the report will include a separete plot for each marker type.

{{< plotly json="/plotly/alignment_report_scatter_loci.json" height="700px" >}}

{{% expand "Description of each variable" %}}
|Column|Description|
|-|-|
|**Marker type**|Marker type (This column only appears on a global table for all marker types)<br>For a description of each format, see [`-k, --markers`]({{< relref "assembly/align/options#-k---markers" >}}) option|
|**Format**|Format of the alignment<br>For a description of each format, see [`-f, --formats`]({{< relref "assembly/align/options#-f---formats" >}}) option|
|**Locus**|Locus / marker name|

The subsequent columns correspond to the different versions of the alignments in your results.  
You will have up to 12 columns as follows:
|Column|Trimming|Paralog filter|With reference|Location|
|-|-|-|-|-|
|**02_aligned_untrimmed<br>└01_unfiltered_w_refs**|No|No|**Yes**|`02_aligned_untrimmed/01_unfiltered_w_refs`|
|**02_aligned_untrimmed<br>└02_naive_w_refs**|No|**Naive**|**Yes**|`02_aligned_untrimmed/02_naive_w_refs`|
|**02_aligned_untrimmed<br>└03_informed_w_refs**|No|**Informed**|**Yes**|`02_aligned_untrimmed/03_informed_w_refs`|
|**02_aligned_untrimmed<br>└01_unfiltered**|No|No|No|`02_aligned_untrimmed/01_unfiltered`|
|**02_aligned_untrimmed<br>└02_naive**|No|**Naive**|No|`02_aligned_untrimmed/02_naive`|
|**02_aligned_untrimmed<br>└03_informed**|No|**Informed**|No|`02_aligned_untrimmed/03_informed`|
|**03_aligned_trimmed<br>└01_unfiltered_w_refs**|**Yes**|No|**Yes**|`03_aligned_trimmed/01_unfiltered_w_refs`|
|**03_aligned_trimmed<br>└02_naive_w_refs**|**Yes**|**Naive**|**Yes**|`03_aligned_trimmed/02_naive_w_refs`|
|**03_aligned_trimmed<br>└03_informed_w_refs**|**Yes**|**Informed**|**Yes**|`03_aligned_trimmed/03_informed_w_refs`|
|**03_aligned_trimmed<br>└01_unfiltered**|**Yes**|No|No|`03_aligned_trimmed/01_unfiltered`|
|**03_aligned_trimmed<br>└02_naive**|**Yes**|**Naive**|No|`03_aligned_trimmed/02_naive`|
|**03_aligned_trimmed<br>└03_informed**|**Yes**|**Informed**|No|`03_aligned_trimmed/03_informed`|
The subsequent columns correspond to the different processing steps of the alignments in your results.  
You will have up to 12 processing steps as follows:

{{% /expand %}}

#### Features

---

#### Format dropdown

By default, the tables contain the information about all formats included in your results.
This dropdown allows you to filter each table and extract information about one specific format.
(Note that when you switch the dropdown, the table will be automatically re-sorted and re-colored according to the values.)

For a description of each format, see [`-f, --formats`]({{< relref "assembly/align/options#-f---formats" >}}) option.

---

#### Variable dropdown

By default, the tables show the number of sequences in each alignment.
This dropdown allows you to switch the variable to be shown.
(Note that when you switch the dropdown, the table will be automatically re-sorted and re-colored according to the values.)

There are eight options:
|Variable|Description|
|-|-|
|**Sequences**|Number of sequences in the alignment|
|**Samples**|Number of samples in the alignment|
|**Sequences/Samples**|Number of sequences / number of samples (i.e. mean number of copies per sample)|
|**Alignment Length** (default)|Length of the alignment in base pairs (for `NT`, `GE`, `GF`, `MA`, `MF` formats) or amino acids (for `AA` format)|
|**Informaive Sites**|Number of parsimony-informative sites that have at least two different (unambiguous) characters and of those at least two should occur in at least two samples|
|**Informativeness (%)**|Percentage of informative site|
|**Uninformative Sites**|Alignment length - Informative sites|
|**Constant Sites**|Number of constant sites that have only a single character over all sequences, or sites having only one unambiguous character plus ambiguous characters which include that unambiguous character|
|**Singleton Sites**|Number of singleton sites that have at least two types of characters with at most one unambiguous character occuring multiple times while all other characters occur only once|
|**Patterns**|Number of sites that have different patterns of characters|
|**Mean Pairwise Identity (%)**|Percentage of pairwise characters that are identical in the alignment (including gap versus non-gap residues, but excluding gap versus gap residues)|
|**Missingness (%)**|Percentage of gaps and Ns or Xs in the alignment|

For more explanations about sites and patterns, see [<i class="fab fa-readme"></i> IQ-TREE documentation](http://www.iqtree.org/doc/Frequently-Asked-Questions#how-does-iq-tree-treat-identical-sequences)

### 3. Stats Per Sample

{{< plotly json="/plotly/alignment_report_scatter_samples.json" height="700px" >}}

---
Created by [Gentaro Shigita]({{< ref "../../more/credits/#gentaro-shigita">}}) (11.08.2021)  
Last modified by [Gentaro Shigita]({{< ref "../../more/credits/#gentaro-shigita">}}) (02.09.2021)
